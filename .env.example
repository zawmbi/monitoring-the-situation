# ===========================================
# MONITR - ENVIRONMENT CONFIGURATION
# ===========================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control

# ---------------------------------------------
# ENVIRONMENT
# ---------------------------------------------
NODE_ENV=development

# Override backend port (avoids conflict with Docker on 4000)
PORT=4100

# ---------------------------------------------
# PORTS
# ---------------------------------------------
BACKEND_PORT=4100
FRONTEND_PORT=3001
REDIS_PORT=6379
POSTGRES_PORT=5432
REDIS_COMMANDER_PORT=8081

# ---------------------------------------------
# FRONTEND (Vite)
# ---------------------------------------------
# In dev, leave VITE_API_URL empty — Vite proxy forwards /api/* to the backend.
# Only set these for production builds where no proxy is available.
# VITE_API_URL=http://localhost:4100
# VITE_WS_URL=ws://localhost:4100/ws
# VITE_STOCKS_API_URL=http://localhost:4100/api/stocks

# ---------------------------------------------
# DATABASE
# ---------------------------------------------
POSTGRES_USER=newsuser
POSTGRES_PASSWORD=newspass
POSTGRES_DB=newsdb

# ===========================================
#  NEWS APIS
# ===========================================

# ---------------------------------------------
# NewsAPI.org (Primary news source)
# https://newsapi.org/register
# FREE:  100 requests/day, 1 req/sec (dev only, no commercial use)
# PAID:  Business plan starts ~$449/mo for 250k requests/mo
# LIMIT: Free tier returns articles up to 1 month old
# NOTE:  Free plan requires attribution and is dev-only (localhost)
# ---------------------------------------------
NEWS_API_KEY=

# ---------------------------------------------
# GNews (Alternative news API)
# https://gnews.io/
# FREE:  100 requests/day, 10 articles per request
# BASIC: $29.99/mo — 1,000 requests/day
# PRO:   $79.99/mo — 10,000 requests/day
# LIMIT: Free tier max 10 articles per request, 1-month article age
# ---------------------------------------------
GNEWS_API_KEY=

# ===========================================
#  FINANCIAL / MARKET APIS
# ===========================================

# ---------------------------------------------
# Alpha Vantage (Stocks, forex, crypto)
# https://www.alphavantage.co/support/#api-key
# FREE:  5 requests/minute, 500 requests/day
# PAID:  $49.99/mo for 75 requests/min
# LIMIT: Free tier data may be delayed 15+ min
# ---------------------------------------------
ALPHA_VANTAGE_API_KEY=

# ---------------------------------------------
# Financial Modeling Prep (FMP)
# https://financialmodelingprep.com/developer/docs/
# FREE:  250 requests/day
# PAID:  $19/mo Starter (300 req/min), $29/mo Professional
# USED:  Live market indices, stocks, commodities, bonds (backend)
#        + Currency exchange, country stock markets, financial news (frontend)
# NOTE:  Replaces unofficial Yahoo Finance endpoints. Both keys use the same
#        FMP account — VITE_ prefix is for Vite frontend bundling.
# ---------------------------------------------
FMP_API_KEY=
VITE_FMP_API_KEY=

# ===========================================
#  SOCIAL MEDIA APIS
# ===========================================

# ---------------------------------------------
# Twitter/X API
# https://developer.twitter.com/en/portal/dashboard
# FREE:  Write-only (1 POST tweet/month) — effectively useless for reads
# BASIC: $100/mo — 10,000 read tweets/month, 3,000 write
# PRO:   $5,000/mo — 1M read tweets, 300k write
# LIMIT: Free tier cannot read tweets. Basic is minimum for monitoring.
# NOTE:  If no bearer token, falls back to custom JSON feed
# ---------------------------------------------
TWITTER_ENABLED=true
TWITTER_BEARER_TOKEN=
TWITTER_API_KEY=
TWITTER_API_SECRET=
# Optional: path to local JSON feed for tweets when no bearer token
TWITTER_CUSTOM_FEED_PATH=../data/twitter-feed.json

# ---------------------------------------------
# Reddit API
# https://reddit.com/prefs/apps (create "script" type app)
# FREE:  60 requests/minute (with OAuth), 10 req/min (without)
# PAID:  No paid tier — just rate limits
# LIMIT: Without client_id/secret, unauthenticated is 10 req/min
# NOTE:  Works without auth for basic subreddit reads
# ---------------------------------------------
REDDIT_CLIENT_ID=
REDDIT_CLIENT_SECRET=
REDDIT_USER_AGENT=monitr/1.0

# ---------------------------------------------
# BlueSky / AT Protocol (public API — NO auth required for reads)
# https://docs.bsky.app/
# FREE:  ~3,000 requests per 5 minutes (public reads)
# PAID:  N/A — AT Protocol is open
# LIMIT: No auth needed for reading public posts; creating posts requires login
# NOTE:  Enabled by default since it's free and requires no API key
# ---------------------------------------------
BLUESKY_ENABLED=true

# ---------------------------------------------
# Truth Social (Mastodon-compatible API)
# No official API key — uses Mastodon-compatible endpoints
# FREE:  Public statuses readable without auth (rate limited by IP)
# LIMIT: ~300 requests per 5 minutes (Mastodon default)
# NOTE:  May be blocked from some IPs/cloud providers; enable only if accessible
#        Optionally point to an RSS-Bridge instance for more reliable fetching
# ---------------------------------------------
TRUTHSOCIAL_ENABLED=false
# TRUTHSOCIAL_RSS_BRIDGE_URL=https://your-rss-bridge-instance.com/?action=display

# ---------------------------------------------
# Instagram (Meta Graph API / Basic Display API)
# https://developers.facebook.com/docs/instagram-basic-display-api/
# FREE:  200 calls/user/hour (Basic Display), 200 calls/hour (Graph API)
# LIMIT: Access token expires every 60 days (long-lived) — must be refreshed
#        Basic Display API only returns the authenticated user's own media
#        Graph API requires a Facebook Business Page linked to Instagram
# NOTE:  Instagram deprecated Basic Display API Sep 2024; use Graph API
#        Token generation: Facebook Developer Console > Instagram > Generate Token
# ---------------------------------------------
INSTAGRAM_ACCESS_TOKEN=

# ===========================================
#  GOVERNMENT / ELECTION APIS
# ===========================================

# ---------------------------------------------
# FEC (Federal Election Commission)
# https://api.open.fec.gov/developers/
# FREE:  1,000 requests/hour per API key
# LIMIT: Data is US elections only; some endpoints have pagination limits
# ---------------------------------------------
FEC_API_KEY=

# ---------------------------------------------
# Congress.gov API
# https://api.congress.gov/
# FREE:  5,000 requests/hour (with key), 100/hour (without)
# LIMIT: US Congress data only (bills, votes, members)
# ---------------------------------------------
CONGRESS_API_KEY=

# ---------------------------------------------
# Google Civic Information API
# https://console.cloud.google.com/apis/library/civicinfo.googleapis.com
# FREE:  25,000 requests/day
# LIMIT: US elections data primarily; some international coverage
# ---------------------------------------------
GOOGLE_CIVIC_API_KEY=

# ===========================================
#  NO-KEY SERVICES (free, no authentication)
# ===========================================
#
# The following services require NO API keys and are always active:
#
# GDELT Project            — Global news analysis, tone, themes
#                             ~unlimited (be respectful, 250ms between requests)
# NASA EONET               — Natural disaster events worldwide
#                             No documented rate limit
# ReliefWeb API            — Humanitarian crisis data (OCHA/UN)
#                             No documented rate limit
# UCDP GED API             — Armed conflict data (Uppsala University)
#                             No documented rate limit
# World Bank API           — Economic indicators (GDP, inflation, etc.)
#                             No documented rate limit (be respectful)
# UNHCR Population API     — Refugee/displacement statistics
#                             No documented rate limit
# Frankfurter API          — Foreign exchange rates (ECB data)
#                             No documented rate limit
# Polymarket Gamma API     — Prediction market data
#                             No documented rate limit
# Kalshi Elections API     — Election prediction markets
#                             No documented rate limit
# PredictIt API            — Political prediction markets
#                             No documented rate limit
# Metaculus API             — Forecasting/prediction questions
#                             No documented rate limit
# Wikidata / Wikipedia     — World leaders, political data
#                             ~200 req/sec (respect crawl-delay)
# WHO DON RSS              — Disease outbreak alerts (official WHO)
#                             No documented rate limit
# FiveThirtyEight CSV      — Polling data (CC BY 4.0 licensed)
#                             No documented rate limit
# CISA KEV                 — Known exploited vulnerabilities (US Gov)
#                             No documented rate limit
#

# ===========================================
#  CONTENT CONFIGURATION
# ===========================================

# ---------------------------------------------
# POLLING INTERVALS (seconds)
# ---------------------------------------------
# How often to fetch new content from each source
NEWS_POLL_INTERVAL=300      # 5 minutes
SOCIAL_POLL_INTERVAL=60     # 1 minute
FEED_POLL_INTERVAL=600      # 10 minutes

# ---------------------------------------------
# CACHE TTL (seconds)
# ---------------------------------------------
CACHE_NEWS_TTL=300          # 5 minutes
CACHE_TWEETS_TTL=60         # 1 minute
CACHE_FEEDS_TTL=600         # 10 minutes

# ---------------------------------------------
# RSS FEEDS TO MONITOR
# ---------------------------------------------
# Comma-separated list of RSS feed URLs
RSS_FEEDS=https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml,https://feeds.bbci.co.uk/news/rss.xml,https://rss.politico.com/politics-news.xml,https://www.aljazeera.com/xml/rss/all.xml,https://feeds.foxnews.com/foxnews/latest,https://feeds.skynews.com/feeds/rss/world.xml,https://www.theguardian.com/world/rss,https://www.france24.com/en/rss,https://feeds.a.dj.com/rss/RSSWorldNews.xml

# ---------------------------------------------
# SOCIAL ACCOUNTS TO FOLLOW
# ---------------------------------------------
# Twitter/X accounts (without @)
TWITTER_ACCOUNTS=Reuters,AP,BBCBreaking,cnnbrk,nytimes,WSJ,TheEconomist,AlJazeeraEng,HBR,FoxNews,nytimesworld

# BlueSky accounts (full handle including .bsky.social)
BLUESKY_ACCOUNTS=ap.bsky.social,reuters.bsky.social,bbc.bsky.social,nytimes.bsky.social,washingtonpost.bsky.social

# Truth Social accounts (username only)
TRUTHSOCIAL_ACCOUNTS=realDonaldTrump

# Reddit subreddits
REDDIT_SUBREDDITS=news,worldnews,technology

# ===========================================
#  FIREBASE (Client SDK — these are NOT secrets)
# ===========================================
# Get from: Firebase Console > Project Settings > General > Your apps
VITE_FIREBASE_API_KEY=
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=
VITE_FIREBASE_APP_ID=

# Set to 'true' to use Firebase emulators in development
VITE_USE_FIREBASE_EMULATORS=false

# ===========================================
#  STRIPE (Server-side — NEVER expose to frontend)
# ===========================================
# Get from: https://dashboard.stripe.com/apikeys
# SECURITY: In production, store as Firebase secrets, not in .env.
# STRIPE_SECRET_KEY=sk_test_...
# STRIPE_WEBHOOK_SECRET=whsec_...

# Stripe price ID for the Pro subscription plan
VITE_STRIPE_PRICE_ID=price_...

# Allowed origins for Stripe redirect validation (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000

# ===========================================
#  WEATHER (Optional)
# ===========================================
# OpenWeatherMap — https://openweathermap.org/api
# FREE: 1,000 calls/day, 60 calls/min
# PAID: $40/mo for 100k calls/day
VITE_OPENWEATHER_API_KEY=

# ===========================================
#  IMAGES (Optional)
# ===========================================
# Unsplash — https://unsplash.com/developers
# FREE: 50 requests/hour (demo), 5000/hour (production approved)
VITE_UNSPLASH_ACCESS_KEY=

# ===========================================
#  PRODUCTION OVERRIDES
# ===========================================
# REDIS_URL=redis://your-production-redis:6379
# DATABASE_URL=postgres://user:pass@your-production-db:5432/newsdb

# ===========================================
#  RATE LIMIT SUMMARY
# ===========================================
#
# SERVICE               FREE TIER LIMIT                 COST TO UPGRADE
# -------               ---------------                 ---------------
# NewsAPI.org           100 req/day (dev only)          $449/mo (Business)
# GNews                 100 req/day, 10 articles/req    $29.99/mo (Basic)
# Alpha Vantage         5 req/min, 500 req/day          $49.99/mo (75 req/min)
# FMP (markets+stocks)  250 req/day                     $19/mo (Starter)
# Twitter/X             0 reads (free), 10k/mo (Basic)  $100/mo (Basic)
# Reddit                60 req/min (auth), 10 (unauth)  Free (no paid tier)
# BlueSky               ~3,000 req/5min (public)        Free (open protocol)
# Truth Social          ~300 req/5min (Mastodon compat) Free (no official API)
# Instagram Graph API   200 calls/hour                  Free (Meta Business)
# FEC                   1,000 req/hour                  Free
# Congress.gov          5,000 req/hour (keyed)          Free
# Google Civic          25,000 req/day                  Free
# GDELT                 Unlimited (be respectful)       Free
# NASA EONET            No hard limit                   Free
# ReliefWeb             No hard limit                   Free
# UCDP                  No hard limit                   Free
# World Bank            No hard limit                   Free
# UNHCR                 No hard limit                   Free
# Frankfurter           No hard limit                   Free
# WHO DON RSS           No hard limit                   Free
# FiveThirtyEight CSV   No hard limit (CC BY 4.0)       Free
# Polymarket            No hard limit                   Free
# Kalshi                No hard limit                   Free
# PredictIt             No hard limit                   Free
# Metaculus             No hard limit                   Free
# Wikidata              ~200 req/sec                    Free
# OpenWeatherMap        1,000 req/day                   $40/mo
# Unsplash              50 req/hour (demo)              Free (apply for prod)
#
